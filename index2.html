<html>

<head>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>EI Design Space</title>


    <script type="text/javascript" src="libs/d3.v4.min.js"></script>
    <script type="text/javascript" src="libs/echarts.min.js"></script>
    <script type="text/javascript" src="libs/echarts-gl.min.js"></script>
    <script type="text/javascript" src="libs/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="data/content.js"></script>
    <script type="text/javascript" src="data/scatter2.js"></script>

    <!-- <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'> -->
    <!-- <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'> -->
    <link rel="stylesheet" type="text/css" href="libs/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/css.css">

</head>


<body>



    <!-- table  -->
    <!-- <div class="container-fluid text-center" id="major"> -->



    <div id="maskColor" style="background: linear-gradient(to right, #007FE4 0%,#00C1FF 100%);">
        <img src="src/smile.png" width="30px" style="margin-top: 20px;margin-left: 20px;position:absolute" />
        <h1 class="major">What Triggers Emotional Responses in an Infographic?</h1>
        <button class="tab_button_d" onclick="setTab('one',1,2)" id="one1">design space</button>
        <button class="tab_button_s" onclick="setTab('one',2,2)" id="one2">data set</button>
        <!-- <button class = "button_c" onclick="changeColor()" ><img src="src/color.png" width="25px" style="margin-right: 5px;"></button>-->
    </div>


    <!-- <div style="width: 500px;text-align: center;"> 
		<p>
		Here is intro.
		xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
		xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

		</p>
	</div> -->

    <!-- <p style="margin-left: 650px;font-size: 10px;">Copyright©2020 Intelligent Big Data Visualization Lab, Tongji University ,Shanghai, China</p>
	 -->




    <div style="display: none;" id="con_one_2">
        <a class="DownButtonNormal" name="DownLoadHistEvent" download="EmotionInfoG.csv" href="http://beijingair.sinaapp.com/data/beijing/all/20131205/csv">
            <img src="src/download.png" height="20px" width="20px" /> Data
        </a>
        <div id="scatter2D"></div>
        <div id="scatter3D"></div>>
    </div>




    <div id="con_one_1" style="display: block;">
        <p class="sub"> Interactive Design Space</p>
        <button class="button_c" onclick="changeColor()"><img src="src/color.png" width="20px" style="margin-right: 5px;"></button>
        <p id="colorset_Name"></p>

        <div class="container-fluid" id="ds-container">
            <div class="col-md-10 col-md-offset-1">
                <table class="table table-condensed table-bordered" id="design-space" style="table-layout:automatic;border-radius: 5px;">
                    <tbody>

                        <!-- <tr>
                    <td colspan="2" class="no-border"><b></b></td>
					<td colspan="37" class="heavy-bottom"><b >HINTS TO TRIGGER WANTED EMOTIONS</b></td>
                </tr> -->


                        <tr>
                            <td colspan="2" class="no-border"><b></b></td>
                            <td colspan="10" class="heavy-bottom black" title="xxx" deta-title><b style="color:white">GRAPHIC DESIGN</b></td>
                            <td colspan="11" class="heavy-bottom black" title="xxx" deta-title><b style="color:white">NARRATIVE</b></td>
                        </tr>

                        <tr>
                            <td colspan="2" class="no-border"><b></b></td>
                            <td colspan="6" class="heavy-bottom-2 dimblue" title="xx" deta-title><b style="color:white;font-size: 9px;">Data Visualization</b></td>
                            <td colspan="4" class="heavy-bottom-2 dimblue" title="xx" deta-title><b style="color:white;font-size: 10px;">Decoration</b></td>
                            <td colspan="5" class="heavy-bottom-2 dimblue" title="xx" deta-title><b style="color:white;font-size: 10px;">Data Explanation</b></td>
                            <td colspan="6" class="heavy-bottom-2 dimblue" title="xx" deta-title><b style="color:white;font-size: 10px;">Rhetorics</b></td>
                        </tr>

                        <!-- <tr>
                    <td colspan="2" class="no-border"><b></b></td>
                    <td colspan="4" class="heavy-bottom" title="Presentation of Information(呈现方式)" deta-title><b>Method</b></td>
					<td colspan="2" class="heavy-bottom" title="Technique of data Rendering(数据渲染)" deta-title><b>Rendering</b></td>
					<td colspan="3" class="heavy-bottom" title="Degree of Decoration(装饰程度)" deta-title><b>Data Ink Ratio<b></td> 
					<td colspan="4" class="heavy-bottom" title="Decorative Techniques(装饰手法)" deta-title><b>Method<b></td> 
					<td colspan="2" class="heavy-bottom" title="Add Meaning to Colors(为颜色添加意义)" deta-title><b>Semantics</b></td>
					<td colspan="4" class="heavy-bottom" title="Color Ccheme(配色方案)" deta-title><b>Scheme</b></td>
					<td colspan="3" class="heavy-bottom" title="Single Visualization as the Core(单个可视化)" deta-title><b>Single</b></td>
					<td colspan="5" class="heavy-bottom" title="Multiple visualizations exist at the same time(多个可视化)" deta-title><b>Multiple</b></td>
					<td colspan="4" class="heavy-bottom" title="Using rhetoric(使用修辞)" deta-title><b>Figurative Language</b></td>
					<td colspan="4" class="heavy-bottom" title="Dialogue with readers(与读者对话)" deta-title><b>Dialogue</b></td>
					<td colspan="3" class="heavy-bottom" title="Design plot(设计情节)" deta-title><b>Plot</b></td>
				</tr> -->



                        <tr style="height: 150px;">
                            <td name="si1" class="heavy-left">
                                <div style="margin-top: 60px;text-align: center;font-weight:900;"><span><small>Emotions</small></span></div>
                            </td>
                            <td name="si2" class="heavy-left">
                                <div style="margin-top: 60px;text-align: center;font-weight:900;"><span><small>Number<br>of <br>Examples</small></span></div>
                            </td>

                            <td name="si01" class=" si01 rotate">
                                <div> <span>	<small id="si01">	color pallat	</small>	</span> </div>
                            </td>
                            <td name="si02" class=" si02 rotate">
                                <div> <span>	<small id="si02">	semantic color	</small>	</span> </div>
                            </td>
                            <td name="si03" class=" si03 rotate">
                                <div> <span>	<small id="si03">	pictogram	</small>	</span> </div>
                            </td>
                            <td name="si04" class=" si04 rotate">
                                <div> <span>	<small id="si04">	visual metaphor	</small>	</span> </div>
                            </td>
                            <td name="si05" class=" si05 rotate">
                                <div> <span>	<small id="si05">	multidimensional metaphor	</small>	</span> </div>
                            </td>
                            <td name="si06" class=" si06 rotate">
                                <div> <span>	<small id="si06">	embodied positioning	</small>	</span> </div>
                            </td>
                            <td name="si07" class=" si07 rotate">
                                <div> <span>	<small id="si07">	custom illustration	</small>	</span> </div>
                            </td>
                            <td name="si08" class=" si08 rotate">
                                <div> <span>	<small id="si08">	realistic texture	</small>	</span> </div>
                            </td>
                            <td name="si09" class=" si09 rotate">
                                <div> <span>	<small id="si09">	scenery/idea framing	</small>	</span> </div>
                            </td>
                            <td name="si10" class=" si10 rotate">
                                <div> <span>	<small id="si10">	photo of human face	</small>	</span> </div>
                            </td>
                            <td name="si11" class=" si11 rotate">
                                <div> <span>	<small id="si11">	emphasis	</small>	</span> </div>
                            </td>
                            <td name="si12" class=" si12 rotate">
                                <div> <span>	<small id="si12">	contrast / turning point	</small>	</span> </div>
                            </td>
                            <td name="si13" class=" si13 rotate">
                                <div> <span>	<small id="si13">	narrowing down	</small>	</span> </div>
                            </td>
                            <td name="si14" class=" si14 rotate">
                                <div> <span>	<small id="si14">	analogy	</small>	</span> </div>
                            </td>
                            <td name="si15" class=" si15 rotate">
                                <div> <span>	<small id="si15">	deliberate omission	</small>	</span> </div>
                            </td>
                            <td name="si16" class=" si16 rotate">
                                <div> <span>	<small id="si16">	addressing the audience	</small>	</span> </div>
                            </td>
                            <td name="si17" class=" si17 rotate">
                                <div> <span>	<small id="si17">	calling to action / slogan	</small>	</span> </div>
                            </td>
                            <td name="si18" class=" si18 rotate">
                                <div> <span>	<small id="si18">	rhetorical question	</small>	</span> </div>
                            </td>
                            <td name="si19" class=" si19 rotate">
                                <div> <span>	<small id="si19">	metaphor / simile	</small>	</span> </div>
                            </td>
                            <td name="si20" class=" si20 rotate">
                                <div> <span>	<small id="si20">	personification	</small>	</span> </div>
                            </td>
                            <td name="si21" class=" si21 rotate">
                                <div> <span>	<small id="si21">	irony	</small>	</span> </div>
                            </td>




                            <tr>
                                <td class="heavy-left"><b>happy</b></td>
                                <td class="heavy-left"><b name="s1Sum">48</b></td>
                                <td name="s101" class="active-cell s101">0</td>
                                <td name="s102" class="active-cell s102">20</td>
                                <td name="s103" class="active-cell s103">17</td>
                                <td name="s104" class="active-cell s104">6</td>
                                <td name="s105" class="active-cell s105">1</td>
                                <td name="s106" class="active-cell s106">3</td>
                                <td name="s107" class="active-cell s107">26</td>
                                <td name="s108" class="active-cell s108">3</td>
                                <td name="s109" class="active-cell s109">2</td>
                                <td name="s110" class="active-cell s110">0</td>
                                <td name="s111" class="active-cell s111">5</td>
                                <td name="s112" class="active-cell s112">1</td>
                                <td name="s113" class="active-cell s113">0</td>
                                <td name="s114" class="active-cell s114">2</td>
                                <td name="s115" class="active-cell s115">0</td>
                                <td name="s116" class="active-cell s116">11</td>
                                <td name="s117" class="active-cell s117">2</td>
                                <td name="s118" class="active-cell s118">2</td>
                                <td name="s119" class="active-cell s119">0</td>
                                <td name="s120" class="active-cell s120">1</td>
                                <td name="s121" class="active-cell s121">0</td>



                            </tr>



                            <tr>
                                <td class="heavy-left"><b>suprised</b></td>
                                <td class="heavy-left"><b name="s2Sum">44</b></td>
                                <td name="s201" class="active-cell s201">0</td>
                                <td name="s202" class="active-cell s202">8</td>
                                <td name="s203" class="active-cell s203">16</td>
                                <td name="s204" class="active-cell s204">3</td>
                                <td name="s205" class="active-cell s205">0</td>
                                <td name="s206" class="active-cell s206">1</td>
                                <td name="s207" class="active-cell s207">7</td>
                                <td name="s208" class="active-cell s208">1</td>
                                <td name="s209" class="active-cell s209">1</td>
                                <td name="s210" class="active-cell s210">2</td>
                                <td name="s211" class="active-cell s211">9</td>
                                <td name="s212" class="active-cell s212">4</td>
                                <td name="s213" class="active-cell s213">3</td>
                                <td name="s214" class="active-cell s214">2</td>
                                <td name="s215" class="active-cell s215">1</td>
                                <td name="s216" class="active-cell s216">6</td>
                                <td name="s217" class="active-cell s217">0</td>
                                <td name="s218" class="active-cell s218">0</td>
                                <td name="s219" class="active-cell s219">1</td>
                                <td name="s220" class="active-cell s220">0</td>
                                <td name="s221" class="active-cell s221">0</td>


                            </tr>


                            <tr>
                                <td class="heavy-left"><b>exicted</b></td>
                                <td class="heavy-left"><b name="s3Sum">15</b></td>
                                <td name="s301" class="active-cell s301">0</td>
                                <td name="s302" class="active-cell s302">5</td>
                                <td name="s303" class="active-cell s303">5</td>
                                <td name="s304" class="active-cell s304">0</td>
                                <td name="s305" class="active-cell s305">0</td>
                                <td name="s306" class="active-cell s306">2</td>
                                <td name="s307" class="active-cell s307">7</td>
                                <td name="s308" class="active-cell s308">1</td>
                                <td name="s309" class="active-cell s309">0</td>
                                <td name="s310" class="active-cell s310">0</td>
                                <td name="s311" class="active-cell s311">4</td>
                                <td name="s312" class="active-cell s312">1</td>
                                <td name="s313" class="active-cell s313">0</td>
                                <td name="s314" class="active-cell s314">0</td>
                                <td name="s315" class="active-cell s315">1</td>
                                <td name="s316" class="active-cell s316">0</td>
                                <td name="s317" class="active-cell s317">1</td>
                                <td name="s318" class="active-cell s318">1</td>
                                <td name="s319" class="active-cell s319">0</td>
                                <td name="s320" class="active-cell s320">0</td>
                                <td name="s321" class="active-cell s321">0</td>



                            </tr>

                            <tr>
                                <td class="heavy-left"><b>content</b></td>
                                <td class="heavy-left"><b name="s4Sum">28</b></td>
                                <td name="s401" class="active-cell s401">0</td>
                                <td name="s402" class="active-cell s402">15</td>
                                <td name="s403" class="active-cell s403">10</td>
                                <td name="s404" class="active-cell s404">5</td>
                                <td name="s405" class="active-cell s405">1</td>
                                <td name="s406" class="active-cell s406">2</td>
                                <td name="s407" class="active-cell s407">8</td>
                                <td name="s408" class="active-cell s408">4</td>
                                <td name="s409" class="active-cell s409">1</td>
                                <td name="s410" class="active-cell s410">1</td>
                                <td name="s411" class="active-cell s411">6</td>
                                <td name="s412" class="active-cell s412">2</td>
                                <td name="s413" class="active-cell s413">0</td>
                                <td name="s414" class="active-cell s414">1</td>
                                <td name="s415" class="active-cell s415">0</td>
                                <td name="s416" class="active-cell s416">2</td>
                                <td name="s417" class="active-cell s417">1</td>
                                <td name="s418" class="active-cell s418">0</td>
                                <td name="s419" class="active-cell s419">0</td>
                                <td name="s420" class="active-cell s420">0</td>
                                <td name="s421" class="active-cell s421">0</td>
                            </tr>

                            <tr>
                                <td class="heavy-left"><b>awestruck</b></td>
                                <td class="heavy-left"><b name="s5Sum">18</b></td>
                                <td name="s501" class="active-cell s501">0</td>
                                <td name="s502" class="active-cell s502">4</td>
                                <td name="s503" class="active-cell s503">5</td>
                                <td name="s504" class="active-cell s504">1</td>
                                <td name="s505" class="active-cell s505">0</td>
                                <td name="s506" class="active-cell s506">7</td>
                                <td name="s507" class="active-cell s507">1</td>
                                <td name="s508" class="active-cell s508">0</td>
                                <td name="s509" class="active-cell s509">0</td>
                                <td name="s510" class="active-cell s510">0</td>
                                <td name="s511" class="active-cell s511">0</td>
                                <td name="s512" class="active-cell s512">0</td>
                                <td name="s513" class="active-cell s513">1</td>
                                <td name="s514" class="active-cell s514">0</td>
                                <td name="s515" class="active-cell s515">0</td>
                                <td name="s516" class="active-cell s516">2</td>
                                <td name="s517" class="active-cell s517">0</td>
                                <td name="s518" class="active-cell s518">0</td>
                                <td name="s519" class="active-cell s519">1</td>
                                <td name="s520" class="active-cell s520">0</td>
                                <td name="s521" class="active-cell s521">0</td>
                            </tr>

                            <tr>
                                <td class="heavy-left"><b>hopeful</b></td>
                                <td class="heavy-left"><b name="s6Sum">12</b></td>
                                <td name="s601" class="active-cell s601">0</td>
                                <td name="s602" class="active-cell s602">3</td>
                                <td name="s603" class="active-cell s603">3</td>
                                <td name="s604" class="active-cell s604">1</td>
                                <td name="s605" class="active-cell s605">0</td>
                                <td name="s606" class="active-cell s606">1</td>
                                <td name="s607" class="active-cell s607">3</td>
                                <td name="s608" class="active-cell s608">2</td>
                                <td name="s609" class="active-cell s609">0</td>
                                <td name="s610" class="active-cell s610">0</td>
                                <td name="s611" class="active-cell s611">7</td>
                                <td name="s612" class="active-cell s612">0</td>
                                <td name="s613" class="active-cell s613">0</td>
                                <td name="s614" class="active-cell s614">0</td>
                                <td name="s615" class="active-cell s615">0</td>
                                <td name="s616" class="active-cell s616">1</td>
                                <td name="s617" class="active-cell s617">1</td>
                                <td name="s618" class="active-cell s618">1</td>
                                <td name="s619" class="active-cell s619">1</td>
                                <td name="s620" class="active-cell s620">0</td>
                                <td name="s621" class="active-cell s621">0</td>

                            </tr>

                            <tr>
                                <td class="heavy-left"><b>sad</b></td>
                                <td class="heavy-left"><b name="s7Sum">18</b></td>
                                <td name="s701" class="active-cell s701">0</td>
                                <td name="s702" class="active-cell s702">7</td>
                                <td name="s703" class="active-cell s703">2</td>
                                <td name="s704" class="active-cell s704">4</td>
                                <td name="s705" class="active-cell s705">2</td>
                                <td name="s706" class="active-cell s706">2</td>
                                <td name="s707" class="active-cell s707">1</td>
                                <td name="s708" class="active-cell s708">1</td>
                                <td name="s709" class="active-cell s709">2</td>
                                <td name="s710" class="active-cell s710">0</td>
                                <td name="s711" class="active-cell s711">6</td>
                                <td name="s712" class="active-cell s712">0</td>
                                <td name="s713" class="active-cell s713">2</td>
                                <td name="s714" class="active-cell s714">0</td>
                                <td name="s715" class="active-cell s715">0</td>
                                <td name="s716" class="active-cell s716">0</td>
                                <td name="s717" class="active-cell s717">0</td>
                                <td name="s718" class="active-cell s718">1</td>
                                <td name="s719" class="active-cell s719">1</td>
                                <td name="s720" class="active-cell s720">1</td>
                                <td name="s721" class="active-cell s721">0</td>
                            </tr>

                            <tr>
                                <td class="heavy-left"><b>concerned</b></td>
                                <td class="heavy-left"><b name="s8Sum">43</b></td>
                                <td name="s801" class="active-cell s801">0</td>
                                <td name="s802" class="active-cell s802">16</td>
                                <td name="s803" class="active-cell s803">13</td>
                                <td name="s804" class="active-cell s804">5</td>
                                <td name="s805" class="active-cell s805">0</td>
                                <td name="s806" class="active-cell s806">2</td>
                                <td name="s807" class="active-cell s807">11</td>
                                <td name="s808" class="active-cell s808">4</td>
                                <td name="s809" class="active-cell s809">3</td>
                                <td name="s810" class="active-cell s810">1</td>
                                <td name="s811" class="active-cell s811">14</td>
                                <td name="s812" class="active-cell s812">2</td>
                                <td name="s813" class="active-cell s813">5</td>
                                <td name="s814" class="active-cell s814">3</td>
                                <td name="s815" class="active-cell s815">1</td>
                                <td name="s816" class="active-cell s816">11</td>
                                <td name="s817" class="active-cell s817">8</td>
                                <td name="s818" class="active-cell s818">1</td>
                                <td name="s819" class="active-cell s819">3</td>
                                <td name="s820" class="active-cell s820">2</td>
                                <td name="s821" class="active-cell s821">4</td>
                            </tr>

                            <tr>
                                <td class="heavy-left"><b>shocked</b></td>
                                <td class="heavy-left"><b name="s9Sum">10</b></td>
                                <td name="s901" class="active-cell s901">0</td>
                                <td name="s902" class="active-cell s902">4</td>
                                <td name="s903" class="active-cell s903">3</td>
                                <td name="s904" class="active-cell s904">1</td>
                                <td name="s905" class="active-cell s905">0</td>
                                <td name="s906" class="active-cell s906">2</td>
                                <td name="s907" class="active-cell s907">1</td>
                                <td name="s908" class="active-cell s908">2</td>
                                <td name="s909" class="active-cell s909">1</td>
                                <td name="s910" class="active-cell s910">1</td>
                                <td name="s911" class="active-cell s911">5</td>
                                <td name="s912" class="active-cell s912">2</td>
                                <td name="s913" class="active-cell s913">2</td>
                                <td name="s914" class="active-cell s914">0</td>
                                <td name="s915" class="active-cell s915">0</td>
                                <td name="s916" class="active-cell s916">3</td>
                                <td name="s917" class="active-cell s917">2</td>
                                <td name="s918" class="active-cell s918">0</td>
                                <td name="s919" class="active-cell s919">0</td>
                                <td name="s920" class="active-cell s920">0</td>
                                <td name="s921" class="active-cell s921">0</td>
                            </tr>







                            <tbody>
                </table>

                <!-- <p style="text-align: center;font-size: 10px;">Copyright©2020 Intelligent Big Data Visualization Lab, Tongji University ,Shanghai, China</p> -->


            </div>

        </div>












        <!-- detail infoG -->

        <div class="container-fluid" id="cue-overlay-container">

            <!-- 弹出页构建 -->
            <button class='glyphicon-close'>
				<!-- <img src="src/close.png"  height="10" width="10" style="margin-right: 5px;"/> -->
			</button>


            <div class="container-img" id="water-fall-container">
                <!--<div class="imgShow"><a href="images/temp_img02.jpg"><img src="images/temp_img02.jpg" width="380px"/></a></div>
	<div class="imgShow"><a href="images/temp_img03.jpg"><img src="images/temp_img03.jpg" width="380px"/></a></div>
	<div class="imgShow"><a href="images/temp_img04.jpg"><img src="images/temp_img04.jpg" width="380px"/></a></div>
	<div class="imgShow"><a href="images/temp_img05.jpg"><img src="images/temp_img05.jpg" width="380px"/></a></div>
	<div class="imgShow"><a href="images/temp_img06.jpg"><img src="images/temp_img06.jpg" width="380px"/></a></div>
	<div class="imgShow"><a href="images/temp_img07.jpg"><img src="images/temp_img07.jpg" width="380px"/></a></div>
	<div class="imgShow"><a href="images/temp_img08.jpg"><img src="images/temp_img08.jpg" width="380px"/></a></div>
	<div class="imgShow"><a href="images/temp_img09.jpg"><img src="images/temp_img09.jpg" width="380px"/></a></div>
	<div class="imgShow"><a href="images/temp_img10.jpg"><img src="images/temp_img10.jpg" width="380px"/></a></div>
	<div class="imgShow"><a href="images/temp_img11.jpg"><img src="images/temp_img11.jpg" width="380px"/></a></div>
	<div class="imgShow"><a href="images/temp_img12.jpg"><img src="images/temp_img12.jpg" width="380px"/></a></div>
	<div class="imgShow"><a href="images/temp_img13.jpg"><img src="images/temp_img13.jpg" width="380px"/></a></div>
	<div class="imgShow"><a href="images/temp_img14.jpg"><img src="images/temp_img14.jpg" width="380px"/></a></div>
	<div class="imgShow"><a href="images/temp_img15.jpg"><img src="images/temp_img15.jpg" width="380px"/></a></div>
	 -->
            </div>
        </div>


    </div>







    <script type="text/javascript">
        //=================功能===tab切换===============
        function setTab(name, cursel, n) {
            for (var i = 1; i <= n; i++) {
                console.log(name + i)
                var menu = document.getElementById(name + i);
                var con = document.getElementById("con_" + name + "_" + i);
                //被点击后
                if (i == cursel) {
                    menu.style.color = "black";
                    menu.style.background = "#FFE82D";
                } else {
                    menu.style.color = "white";
                    menu.style.background = "transparent";
                }
                con.style.display = i == cursel ? "block" : "none";
            }
        }

        //默认选中
        document.getElementById("one1").click();
    </script>




    <!-- draw function -->
    <script type="text/javascript">
        //=================功能===填色===============
        //table fill color  && star img
        var colName;
        var sumName;

        for (var c = 1; c <= 9; c++) {
            for (var r = 1; r <= 21; r++) {
                colName = "s" + c + r;
                sumName = "s" + c + "Sum";
                if (r <= 9) {
                    colName = "s" + c + "0" + r;
                }

                var parent = document.getElementsByName(colName)[0];
                var value = parent.innerHTML;
                var sum = document.getElementsByName(sumName)[0].innerHTML;
                var ratio = value / sum;
                //四级
                if (0.8 <= ratio) { //此级没有数字
                    // var img = document.createElement("img");
                    // img.setAttribute("src", "src/star.png");
                    // img.setAttribute("height", "10px");
                    // img.setAttribute("width", "10px");
                    // parent.appendChild(img);
                    parent.style.setProperty('background-color', '#6c9bef');
                }
                if (0.4 <= ratio && ratio < 0.8) {
                    // var img = document.createElement("img");
                    // img.setAttribute("src", "src/star.png");
                    // img.setAttribute("height", "10px");
                    // img.setAttribute("width", "10px");
                    // parent.appendChild(img);
                    parent.style.setProperty('background-color', '#84abf0');
                }
                if (0.1 <= ratio && ratio < 0.4) {
                    parent.style.setProperty('background-color', '#adc7f5');
                }
                if (0 < ratio && ratio < 0.1) {
                    parent.style.setProperty('background-color', '#dce4f7 ');
                }
            }
        }
    </script>



    <!-- click function -->
    <script type="text/javascript">
        //=================功能=============================tooltip
        function detaTitle() {
            var deta_title = document.querySelectorAll("[deta-title]");
            for (var i = 0; i < deta_title.length; i++) {
                deta_title[i].setAttribute("deta-title", deta_title[i].getAttribute("title"));
                deta_title[i].removeAttribute("title");
            }
        }
        detaTitle();


        var sleep = function(time) {
            var startTime = new Date().getTime() + parseInt(time, 10);
            while (new Date().getTime() < startTime) {}
        };

        // sleep(1000); // 延时函数，单位ms


        //=====================功能===============瀑布流
        document.getElementsByClassName = function(className, tag, elm) {
            var testClass = new RegExp("(^|\s)" + className + "(\s|$)");
            var tag = tag || "*";
            var elm = elm || document;
            var elements = (tag == "*" && elm.all) ? elm.all : elm.getElementsByTagName(tag);
            var returnElements = [];
            var current;
            var length = elements.length;
            for (var i = 0; i < length; i++) {
                current = elements[i];
                if (testClass.test(current.className)) {
                    returnElements.push(current);
                }
            }
            return returnElements;
        }


        function show() {
            //offsetHeight 需要动态获取	
            var margin = 10;
            var boxes = document.getElementsByClassName('imgShow');

            var con = document.getElementsByClassName('container-fluid'); //fix
            var text = document.getElementsByTagName('h4');
            var boxWidth = boxes[0] ? boxes[0].offsetWidth + margin : 400 + margin; //offsetWidth 固定为400

            var columnHeight = [];
            var bodyWidth = document.body.offsetWidth;
            var n = parseInt(bodyWidth / boxWidth);
            var columnNum = n == 0 ? 1 : n;
            var bodyLeft = bodyWidth >= boxWidth ? bodyWidth - columnNum * boxWidth : 0;
            con[0].style.left = parseInt(bodyLeft / 2) - margin / 2 + 'px';




            console.log(boxes, boxes[0].offsetHeight)
            for (var i = 0, l = boxes.length; i < l; i++) {


                if (i < columnNum) {
                    columnHeight[i] = boxes[i].offsetHeight + margin;
                    boxes[i].style.top = 0;
                    boxes[i].style.left = i * boxWidth + margin + 'px';
                } else {
                    var innsertColumn = min(columnHeight),
                        imgHeight = boxes[i].offsetHeight + margin;
                    boxes[i].style.top = columnHeight[innsertColumn] + 'px';
                    boxes[i].style.left = innsertColumn * boxWidth + margin + 'px';
                    columnHeight[innsertColumn] += imgHeight;
                };


                //console.log(i,boxes,boxes[i].offsetWidth,boxes[i].offsetHeight,boxes[i].style.top) // load完成之前 height都是22

            };
        };

        function min(heightAarry) {
            var minColumn = 0;
            var minHeight = heightAarry[minColumn];
            for (var i = 1, len = heightAarry.length; i < len; i++) {
                var temp = heightAarry[i];
                if (temp < minHeight) {
                    minColumn = i;
                    minHeight = temp;
                };
            };
            return minColumn;
        }
        window.onload = function() {
            show();
        };
        window.onresize = function() {
            show();
        };



        //============功能==d3 事件============点击表格触发
        var url = window.location.href,
            idx = 0,
            idp = 0,
            idl = 0;

        var skill = 0;
        var emotion = 0;
        var emotionText = 0;
        var table = new Array();

        url = url.split("?");

        if (url.length > 1) {
            idx = parseInt(url[1]) - 1;
            d3.select("#cue-overlay-container")
                .classed("show", true);
        };

        d3.selectAll(".active-cell")
            .on("mouseover", function() {
                var classname = d3.select(this).attr("name");
                d3.selectAll("." + classname)
                    .classed("highlighted", true);
                // .style("highlighted",true);
                // d3.selectAll(".active-cell")
                //   .classed("highlighted",true);
                return;
            })
            .on("mouseout", function() {
                var classname = d3.select(this).attr("name");
                d3.selectAll("." + classname)
                    .classed("highlighted", false);
                return;
            })
            .on("mouseup", function() {
                var classname = d3.select(this).attr("name");
                //获取格子的横纵属性用于查询
                skill = "si" + classname.slice(2, 4);
                emotion = classname.slice(1, 2); //1 happy 2 surprised 3 a  4 concerned
                console.log("emotion" + emotion)
                switch (emotion) {
                    case "1":
                        emotion = emotionText = "happy";
                        break;

                    case "2":
                        emotion = emotionText = "surprised";
                        break;

                    case "3":
                        emotion = emotionText = "exicted";
                        break;

                    case "4":
                        emotion = emotionText = "content";
                        break;

                    case "5":
                        emotion = emotionText = "awestruck";
                        break;

                    case "6":
                        emotion = emotionText = "hopeful";
                        break;

                    case "7":
                        emotion = emotionText = "sad";
                        break;

                    case "8":
                        emotion = emotionText = "concerned";
                        break;

                    case "9":
                        emotion = emotionText = "shocked";
                        break;

                    default:
                        return null;
                }

                //动态创建查询列表
                table.length = 0; //refresh
                for (var i = 0; i < cues.length; i++) {
                    console.log(skill, cues[i])
                    if (cues[i].index.indexOf(emotion) != -1 && cues[i][skill] == 1) {
                        table.push(cues[i]);
                    }
                }

                idp = 0;
                idl = table.length; //length 查询到的所有图片的length
                console.log(table)

                if (idl != 0) {
                    //addContent(table); //将查询到的内容增加到fluid页面中 1.0

                    var Fall = document.getElementById("water-fall-container");
                    addWaterfall(table, Fall); //将查询到的内容增加到waterfall页面中 2.0

                    show();
                    //sleep(1000); // 延时函数，单位ms

                    d3.select("#cue-overlay-container")
                        .classed("show", true);
                }



                return;
            });

        function addContent(table) {
            //需要vpn
            var data = table != "" ? table[idp] : cues[3];
            title = d3.select("#title"),
                description = d3.select("#description").select("p"),
                source = d3.select("#source"),
                gif = d3.select("#gif"),
                topic = d3.select("#topic"),
                dim1 = d3.select("#d1"),
                dim2 = d3.select("#d2"),
                dim3 = d3.select("#d3"),
                dim4 = d3.select("#d4"),
                dim5 = d3.select("#d5"),
                dim6 = d3.select("#d6"),
                // dim7 = d3.select("#d7");
                title.html(emotionText + " " + (idp + 1) + "/" + idl);
            gif.attr("src", data.link)
                .attr("loop", "infinite");
            var src = data.link; //识别本地图片和网络图片
            if (data.link.indexOf("src/") != -1) {
                src = "https://infographics-test.s3-us-west-1.amazonaws.com/" + data.link.slice(4)
            }
            source.html("<a href='" + src + "'>" + src + "</a>");
            topic.html(data.topic);
            description.html(data.des);

            var skillList1 = [];
            var skillList2 = [];
            var skillList3 = [];
            var skillList4 = [];
            var skillList5 = [];
            var skillList6 = [];
            // document.getElementById("gif").src = data.link;
            for (var m = 1; m < 39; m++) {
                var skillNum = "si" + m;
                if (m < 10) {
                    skillNum = "si" + "0" + m;
                }
                if (data[skillNum] == 1 && document.getElementById(skillNum)) {
                    if (0 < m && m <= 6) {
                        // if(skillList1==""){skillList1.push("●  "+document.getElementById(skillNum).innerHTML)}
                        // else{skillList1.push("<br>●  "+document.getElementById(skillNum).innerHTML)}
                        skillList1.push("<br>●  " + document.getElementById(skillNum).innerHTML)
                    }
                    if (6 < m && m <= 13) {
                        skillList2.push("<br>●  " + document.getElementById(skillNum).innerHTML)
                    }
                    if (13 < m && m <= 19) {
                        skillList3.push("<br>●  " + document.getElementById(skillNum).innerHTML)
                    }
                    if (19 < m && m <= 27) {
                        skillList4.push("<br>●  " + document.getElementById(skillNum).innerHTML)
                    }
                    if (27 < m && m <= 31) {
                        skillList5.push("<br>●  " + document.getElementById(skillNum).innerHTML)
                    }
                    if (31 < m) {
                        skillList6.push("<br>●  " + document.getElementById(skillNum).innerHTML)
                    }
                }
            } //为每张图片定制显示的skill


            if (skillList2 == "") {
                skillList2.push("None");
            }
            if (skillList3 == "") {
                skillList3.push("None");
            }
            if (skillList4 == "") {
                skillList4.push("None");
            }
            if (skillList5 == "") {
                skillList5.push("None");
            }
            if (skillList6 == "") {
                skillList6.push("None");
            }

            dim1.html(skillList1);
            dim2.html(skillList2);
            dim3.html(skillList3);
            dim4.html(skillList4);
            dim5.html(skillList5);
            dim6.html(skillList6);
            // dim7.html(data.d7);
            return;
        };


        function addWaterfall(table, Fall) {


            //清空
            Fall.innerHTML = "";

            for (var i = 0; i < idl; i++) {
                //循环添加瀑布流中图片
                var div_img = document.createElement('div');
                div_img.className = "imgShow";

                var a_img = document.createElement('a');
                a_img.href = "https://infographics-test.s3-us-west-1.amazonaws.com/" + table[i].link.slice(4);


                var img = document.createElement('img');
                //img.src = table[i].link; //本地资源
                img.src = "https://infographics-test.s3-us-west-1.amazonaws.com/" + table[i].link.slice(4);
                img.width = 380;

                // img.onload =function(){
                // // 打印
                // //alert('width:' + img.width + ',height:' + img.height)
                // console.log(div_img.offsetWidth,div_img.offsetHeight )
                // }

                Fall.appendChild(div_img);
                div_img.appendChild(a_img);
                a_img.appendChild(img);
            }




        }

        //addContent(table);//初始化 addcontent















        //前进后退关闭按钮
        d3.select(".chevron-right")
            .on("mouseup", function() {
                if (idp < idl - 1) { //length
                    idp = idp + 1;
                } else {
                    idp = 0;
                };
                addContent(table);
            });
        d3.select(".chevron-left")
            .on("mouseup", function() {
                if (idp > 0) {
                    idp = idp - 1;
                } else {
                    idp = idl - 1;
                };
                addContent(table);
            });
        d3.select(".glyphicon-close")
            .on("mouseup", function() {
                d3.select("#cue-overlay-container")
                    .classed("show", false);
                return;
            });
    </script>
    </script>


    <script type="text/javascript">
    </script>






    <script>
        //===============================功能：切换主题色

        //title色*2，按钮高亮色，边框色和填充色
        var colorset = [
            ["happy", "#F2B39E"],
            ["surprised", "#2A94C2"],
            ["excited", "#E6362E"],
            ["content", "#62C3DA"],
            ["awestruck", "#31353A"],
            ["hopeful", "#9ACC6D"],
            ["sad", "#28344A"],
            ["concerned", "#423E3C"],
            ["shocked", "#991110"],
            ["happy", "#A8D4E8"],
            ["surprised", "#DDAD23"],
            ["excited", "#EB5C36"],
            ["content", "#DEC298"],
            ["awestruck", "#2F4E67"],
            ["hopeful", "#70C1CF"],
            ["sad", "#7F8B89"],
            ["concerned", "#A1B4A9"],
            ["shocked", "#B34A4E"],
        ]

        function changeColor() {

            var maxC = colorset.length;
            var changeC = Math.ceil(Math.random() * maxC);
            //console.log(changeC,colorset[changeC-1][0])

            document.getElementById("maskColor").style.background = colorset[changeC - 1][1];
            for (var j = 0; j < document.getElementsByClassName("heavy-bottom-2 dimblue").length; j++) {
                document.getElementsByClassName("heavy-bottom-2 dimblue")[j].style.background = colorset[changeC - 1][1];
            }

            // //border
            // for(var m= 0;m<document.getElementsByClassName("heavy-left").length;m++){
            // 	document.getElementsByClassName("heavy-left")[m].style.border="1px solid "+colorset[changeC-1][1];
            // }

            // 	for (var i=1; i<=21; i++){ //表格属性数
            //     var siN = i<10?document.getElementsByName("si0"+i)[0]:document.getElementsByName("si"+i)[0];
            // 	siN.style.border="1px solid "+colorset[changeC-1][3];
            // }

            for (var i = 1; i <= 9; i++) { //表格属性数
                for (var j = 1; j <= 21; j++) {
                    var sN = j < 10 ? document.getElementsByName("s" + i + "0" + j)[0] : document.getElementsByName("s" + i + j)[0];
                    //sN.style.border="1px solid "+colorset[changeC-1][3];
                    sN.style.background = colorset[changeC - 1][1];
                }
            }

            //text

            var tN = document.getElementById("colorset_Name");
            //sN.style.border="1px solid "+colorset[changeC-1][3];
            tN.innerText = colorset[changeC - 1][0];




        }
    </script>


    <script type="text/javascript">
        //=====================散点图==========================echarts
        // 基于准备好的dom，初始化echarts实例
        var scatter2d = echarts.init(document.getElementById('scatter2D'));

        //--------------------
        option = {
            xAxis: {},
            yAxis: {},
            series: [
                //两个序列	
                {
                    symbolSize: 2,
                    data: scatter2,
                    type: 'scatter',
                    itemStyle: {
                        shadowBlur: 10,
                        shadowColor: 'rgba(120, 36, 50, 0.5)',
                        shadowOffsetY: 5,
                        color: new echarts.graphic.RadialGradient(0.4, 0.3, 1, [{
                            offset: 0,
                            color: 'rgb(251, 118, 123)'
                        }, {
                            offset: 1,
                            color: 'rgb(204, 46, 72)'
                        }])
                    }
                }, {
                    symbolSize: 10,
                    data: scatter2_cat,
                    type: 'scatter',
                    itemStyle: {
                        shadowBlur: 10,
                        shadowColor: 'rgba(25, 100, 150, 0.5)',
                        shadowOffsetY: 5,
                        color: new echarts.graphic.RadialGradient(0.4, 0.3, 1, [{
                            offset: 0,
                            color: 'rgb(129, 227, 238)'
                        }, {
                            offset: 1,
                            color: 'rgb(25, 183, 207)'
                        }])
                    }
                }
            ],

            title: {
                text: 'xxxxxx',
                subtext: 'By xxxxx',
                // sublink: 'https://github.com/ecomfe/echarts-stat',
                left: 'center'
            },

        };

        // option2 = {
        //     xAxis: {},
        //     yAxis: {},
        //     series: [{
        //         symbolSize: 5,
        //         data: scatter2_cat,
        //         type: 'scatter'
        //     }]
        // };



        // 使用刚指定的配置项和数据显示图表。
        scatter2d.setOption(option);
        //  scatter2d.setOption(option2);


        //color




        //3d
        var scatter3d = echarts.init(document.getElementById('scatter3D'));

        //  var datas=[["井深","Y坐标","人口密度","X坐标","Year"],
        //                   [10,14,11,2014],
        //                   [11,25,22,2015],
        //                   [12,36,33,2016],
        //                   [13,47,40,2017]
        //                  ];
        var datas = scatter3;
        var x_min = -1,
            x_max = 1,
            y_min = -1,
            y_max = 1,
            xuanzhuan = 0;
        //------------------------
        option3D = {
            grid3D: {
                boxWidth: 122, //图件宽
                boxHeight: 122, //图件高
                boxDepth: 60, //图件长
                height: '100%', //容器高
                width: '100%', //容器宽
                bottom: 'auto', //3D图与下容器的距离
                top: 'auto', //3D图与上容器的距离
                axisLine: {
                    lineStyle: {
                        color: 'white' //坐标轴轴线颜色
                    }
                },
                splitLine: {
                    lineStyle: {
                        color: 'white' //分割线颜色
                    }
                },
                axisPointer: {
                    lineStyle: {
                        color: 'white' //鼠标滑过分割线颜色
                    }
                },
                environment: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                    offset: 0,
                    color: '#2F4F4F' // 天空颜色
                }, {
                    offset: 0.7,
                    color: '#2F4F4F' // 地面颜色
                }, {
                    offset: 1,
                    color: '#2F4F4F' // 地面颜色
                }], false),
                postEffect: {
                    enable: false //开启特效
                },
                viewControl: {
                    projection: 'perspective', //默认为透视投影'perspective'，也支持设置为正交投影'orthographic'
                    autoRotate: true, //自动旋转
                    autoRotateDirection: 'ccw', //默认是 'cw' 从上往下看是顺时针 也可以取 'ccw'逆时针
                    autoRotateSpeed: 4, //默认10 自转速度
                    autoRotateAfterStill: 5, //默认3秒 鼠标静止操作后恢复自动旋转的时间间隔
                    damping: 0.8, //鼠标进行旋转，缩放等操作时的迟滞因子，在大于 0 的时候鼠标在停止操作后，视角仍会因为一定的惯性继续运动（旋转和缩放）
                    animation: true, //是否开启动画
                    animationDurationUpdate: 1000, //过渡动画的时长
                    animationEasingUpdate: 'cubicInOut' //过渡动画的缓动效果
                },
                postEffect: {
                    enable: false //是否开启后处理特效，默认关闭 不能开  浏览器会卡
                }
            },
            xAxis3D: {
                show: true,
                name: 'X',
                nameTextStyle: {
                    color: 'white',
                    fontWeight: 'normal'
                },
                min: x_min,
                max: x_max
            },
            yAxis3D: {
                show: true,
                name: 'Y',
                nameTextStyle: {
                    color: 'white',
                    fontWeight: 'normal'
                },
                min: y_min,
                max: x_max
            },
            zAxis3D: {
                show: true,
                name: 'Z-cat',
                nameTextStyle: {
                    color: 'white',
                    fontWeight: 'normal'
                }
            },
            dataset: {
                dimensions: [
                    'Z',
                    'Y',
                    'X', {
                        name: '井名',
                        type: 'ordinal'
                    }
                ],
                source: datas
            },
            series: [{
                type: 'scatter3D', //3D类型
                name: '测试', //名字
                //coordinateSystem: 'grid3D',	//使用地球三维地理坐标系
                //grid3DIndex: 0,				//坐标轴使用的 geo3D 组件的索引
                symbol: 'diamond', //点形状 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow', 'none'
                symbolSize: 3.5, //点大小
                itemStyle: {
                    color: '#2F4F4F', //点颜色
                    borderColor: '#2F4F4F', //点边框颜色
                    opacity: 1, //点的透明度 1不透明
                    borderWidth: 0.5 //图形描边宽度
                },
                label: {
                    show: false, //是否显示点上面的标签，默认false
                    distance: 15, //标签与点的距离
                    position: 'left', //标签位置
                    textStyle: {
                        color: '#2F4F4F', //文字颜色
                        borderWidth: 0, //标签上边框宽度
                        borderColor: '#2F4F4F', //边框颜色
                        fontFamily: '宋体', //标签字体
                        fontSize: 14, //字体大小
                        fontWeight: 'normal' //是否加粗 
                    }
                },
                emphasis: {
                    itemStyle: {
                        color: '#2F4F4F', //鼠标移到点上的颜色变化
                        opacity: 1, //不透明度
                        borderWidth: 0, //图像描边宽度
                        borderColor: '#fff' //图形描边颜色
                    },
                    label: {
                        show: true, //鼠标移动到点上是否显示标签
                        distance: 15, //标签与点的距离
                        position: 'left', //标签位置
                        textStyle: {
                            color: '#2F4F4F', //文字颜色
                            borderWidth: 0, //标签上边框宽度
                            borderColor: 'white', //边框颜色
                            fontFamily: 'SimHei', //标签字体
                            fontSize: 14, //字体大小
                            fontWeight: 'normal' //是否加粗 
                        }
                    }
                },
                blendMode: 'lighter', //混合模式默认使用的'source-over'是通过 alpha 混合，而'lighter'是叠加模式，该模式可以让数据集中的区域因为叠加而产生高亮的效果。
                silent: false, //图形是否不响应和触发鼠标事件，默认为 false，即响应和触发鼠标事件。
                animation: true, //是否开启动画
                animationDurationUpdate: 500, //过渡动画的时长
                animationEasingUpdate: 'cubicOut', //过渡动画的缓动效果
                encode: {
                    x: 'X坐标',
                    y: 'Y坐标',
                    z: '井深',
                    tooltip: [0, 1, 2, 3, 4]
                }
            }]
        };


        // 使用刚指定的配置项和数据显示图表。
        scatter3d.setOption(option3D);
    </script>



</body>

</html>